<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Recipe Manager">
    <title>Recipe Management - Demo</title>
    <link rel="stylesheet" href="static/css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* Additional demo styles */
        .demo-banner {
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            padding: 1rem;
            text-align: center;
            color: #2d3436;
            font-weight: 600;
            border-radius: 8px;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body>
    <!-- Main Content Page -->
    <div id="mainPage" class="main-page">
        <div class="container">
            <div class="demo-banner">
                <i class="fas fa-info-circle"></i>
                Demo Version - UI Refactoring Preview - Hash Navigation with Separate Pages
            </div>

            <header class="header">
                <h1><i class="fas fa-utensils"></i> Recipe Management</h1>
                <p>Manage your favorite recipes with ease - Now with improved UI!</p>
            </header>

            <nav class="nav">
                <button id="addRecipeBtn" class="btn btn-primary">
                    <i class="fas fa-plus"></i> Add Recipe
                </button>
                <button id="importRecipeBtn" class="btn btn-success">
                    <i class="fas fa-download"></i> Import Recipe
                </button>
                <div class="search-container">
                    <input type="text" id="searchInput" placeholder="Search recipes..." class="search-input" 
                           autocomplete="off" autocapitalize="words" spellcheck="false">
                    <button id="searchBtn" class="btn btn-secondary">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
                <div class="filter-container">
                    <button id="filterToggle" class="filter-toggle" style="display: none;">
                        <i class="fas fa-filter"></i> Filters
                    </button>
                    <div id="filterContent" class="filter-content">
                        <select id="difficultyFilter" class="filter-select">
                            <option value="">All Difficulties</option>
                            <option value="easy">Easy</option>
                            <option value="medium">Medium</option>
                            <option value="hard">Hard</option>
                        </select>
                        <select id="tagFilter" class="filter-select">
                            <option value="">All Tags</option>
                        </select>
                        <select id="mealTimeFilter" class="filter-select" multiple>
                            <!-- Meal time options will be populated by JavaScript -->
                        </select>
                        <button id="clearFiltersBtn" class="btn btn-danger">Clear Filters</button>
                    </div>
                </div>
            </nav>

            <main class="main">
                <div id="recipesContainer" class="recipes-grid">
                    <!-- Sample recipes for demo -->
                    <div class="recipe-card" onclick="window.location.hash = '#recipe/1'">
                        <div class="recipe-card-content">
                            <div class="recipe-card-header">
                                <h3 class="recipe-card-title">Classic Pasta Carbonara</h3>
                                <p class="recipe-card-description">A traditional Italian pasta dish with eggs, cheese, and pancetta</p>
                            </div>
                            <div class="recipe-card-body">
                                <div class="recipe-meta">
                                    <div class="recipe-meta-item"><i class="fas fa-clock"></i> 35 min</div>
                                    <div class="recipe-meta-item"><i class="fas fa-users"></i> 4 servings</div>
                                    <div class="recipe-meta-item"><i class="fas fa-signal"></i> Medium</div>
                                </div>
                                <div class="recipe-tags">
                                    <span class="tag">pasta</span>
                                    <span class="tag">dinner</span>
                                    <span class="tag">italian</span>
                                    <span class="tag">quick</span>
                                </div>
                                <div class="recipe-meal-times">
                                    <span class="tag meal-time-tag">Lunch</span>
                                    <span class="tag meal-time-tag">Dinner</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="recipe-card" onclick="window.location.hash = '#recipe/2'">
                        <div class="recipe-card-content">
                            <div class="recipe-card-header">
                                <h3 class="recipe-card-title">Chocolate Chip Cookies</h3>
                                <p class="recipe-card-description">Soft and chewy chocolate chip cookies perfect for any occasion</p>
                            </div>
                            <div class="recipe-card-body">
                                <div class="recipe-meta">
                                    <div class="recipe-meta-item"><i class="fas fa-clock"></i> 32 min</div>
                                    <div class="recipe-meta-item"><i class="fas fa-users"></i> 24 servings</div>
                                    <div class="recipe-meta-item"><i class="fas fa-signal"></i> Easy</div>
                                </div>
                                <div class="recipe-tags">
                                    <span class="tag">dessert</span>
                                    <span class="tag">cookies</span>
                                    <span class="tag">chocolate</span>
                                    <span class="tag">baking</span>
                                </div>
                                <div class="recipe-meal-times">
                                    <span class="tag meal-time-tag">Snack</span>
                                    <span class="tag meal-time-tag">Dessert</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="recipe-card" onclick="window.location.hash = '#recipe/3'">
                        <div class="recipe-card-content">
                            <div class="recipe-card-header">
                                <h3 class="recipe-card-title">Grilled Chicken Salad</h3>
                                <p class="recipe-card-description">A healthy and protein-packed salad with grilled chicken and fresh vegetables</p>
                            </div>
                            <div class="recipe-card-body">
                                <div class="recipe-meta">
                                    <div class="recipe-meta-item"><i class="fas fa-clock"></i> 40 min</div>
                                    <div class="recipe-meta-item"><i class="fas fa-users"></i> 2 servings</div>
                                    <div class="recipe-meta-item"><i class="fas fa-signal"></i> Easy</div>
                                </div>
                                <div class="recipe-tags">
                                    <span class="tag">salad</span>
                                    <span class="tag">healthy</span>
                                    <span class="tag">protein</span>
                                    <span class="tag">lunch</span>
                                </div>
                                <div class="recipe-meal-times">
                                    <span class="tag meal-time-tag">Lunch</span>
                                    <span class="tag meal-time-tag">Dinner</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="loadingSpinner" class="loading-spinner" style="display: none;">
                    <i class="fas fa-spinner fa-spin"></i> Loading...
                </div>

                <div id="noResults" class="no-results" style="display: none;">
                    <i class="fas fa-search"></i>
                    <p>No recipes found. Try adjusting your search or filters.</p>
                </div>
            </main>
        </div>
    </div>

    <!-- Recipe Detail Page -->
    <div id="recipeDetailPage" class="recipe-detail-page" style="display: none;">
        <div class="recipe-detail-header">
            <div class="container">
                <button id="backToListBtn" class="btn btn-back">
                    <i class="fas fa-arrow-left"></i> Back to Recipes
                </button>
                <div class="detail-actions">
                    <button id="editRecipeBtn" class="btn btn-secondary">
                        <i class="fas fa-edit"></i> Edit
                    </button>
                    <button id="deleteRecipeBtn" class="btn btn-danger">
                        <i class="fas fa-trash"></i> Delete
                    </button>
                </div>
            </div>
        </div>
        
        <div class="recipe-detail-container">
            <h1 id="detailTitle" class="recipe-detail-title"></h1>
            <div id="recipeDetailContent" class="recipe-detail">
                <!-- Recipe details will be loaded here -->
            </div>
        </div>
    </div>

    <script>
        // Simple demo data
        const demoRecipes = {
            1: {
                title: "Classic Pasta Carbonara",
                description: "A traditional Italian pasta dish with eggs, cheese, and pancetta",
                prep_time: 15,
                cook_time: 20,
                servings: 4,
                difficulty: "medium",
                tags: ["pasta", "dinner", "italian", "quick"],
                meal_times: ["lunch", "dinner"],
                ingredients: [
                    { name: "Spaghetti", amount: "400", unit: "g" },
                    { name: "Pancetta", amount: "150", unit: "g" },
                    { name: "Eggs", amount: "3", unit: "pieces" },
                    { name: "Parmesan Cheese", amount: "100", unit: "g" },
                    { name: "Black Pepper", amount: "1", unit: "tsp" }
                ],
                instructions: [
                    "Cook spaghetti in salted boiling water according to package instructions",
                    "Meanwhile, cut pancetta into small cubes and cook in a large pan until crispy",
                    "In a bowl, whisk together eggs, grated parmesan, and black pepper",
                    "Drain pasta and immediately add to the pan with pancetta",
                    "Remove from heat and quickly stir in the egg mixture to create a creamy sauce",
                    "Serve immediately with extra parmesan and black pepper"
                ]
            },
            2: {
                title: "Chocolate Chip Cookies",
                description: "Soft and chewy chocolate chip cookies perfect for any occasion",
                prep_time: 20,
                cook_time: 12,
                servings: 24,
                difficulty: "easy",
                tags: ["dessert", "cookies", "chocolate", "baking"],
                meal_times: ["snack", "dessert"],
                ingredients: [
                    { name: "All-purpose flour", amount: "2.25", unit: "cups" },
                    { name: "Butter", amount: "1", unit: "cup" },
                    { name: "Brown sugar", amount: "0.75", unit: "cup" },
                    { name: "White sugar", amount: "0.75", unit: "cup" },
                    { name: "Eggs", amount: "2", unit: "pieces" },
                    { name: "Vanilla extract", amount: "2", unit: "tsp" },
                    { name: "Chocolate chips", amount: "2", unit: "cups" }
                ],
                instructions: [
                    "Preheat oven to 375°F (190°C)",
                    "In a large bowl, cream together butter and both sugars until light and fluffy",
                    "Beat in eggs one at a time, then add vanilla extract",
                    "Gradually mix in flour until just combined",
                    "Fold in chocolate chips",
                    "Drop rounded tablespoons of dough onto ungreased baking sheets",
                    "Bake for 9-12 minutes until edges are golden brown",
                    "Cool on baking sheet for 5 minutes before transferring to wire rack"
                ]
            },
            3: {
                title: "Grilled Chicken Salad",
                description: "A healthy and protein-packed salad with grilled chicken and fresh vegetables",
                prep_time: 25,
                cook_time: 15,
                servings: 2,
                difficulty: "easy",
                tags: ["salad", "healthy", "protein", "lunch"],
                meal_times: ["lunch", "dinner"],
                ingredients: [
                    { name: "Chicken breast", amount: "2", unit: "pieces" },
                    { name: "Mixed greens", amount: "4", unit: "cups" },
                    { name: "Cherry tomatoes", amount: "1", unit: "cup" },
                    { name: "Cucumber", amount: "1", unit: "piece" },
                    { name: "Red onion", amount: "0.25", unit: "piece" },
                    { name: "Olive oil", amount: "3", unit: "tbsp" },
                    { name: "Balsamic vinegar", amount: "2", unit: "tbsp" }
                ],
                instructions: [
                    "Season chicken breasts with salt, pepper, and olive oil",
                    "Heat grill or grill pan to medium-high heat",
                    "Grill chicken for 6-7 minutes per side until cooked through",
                    "Let chicken rest for 5 minutes, then slice into strips",
                    "In a large bowl, combine mixed greens, halved cherry tomatoes, diced cucumber, and thinly sliced red onion",
                    "Whisk together olive oil and balsamic vinegar for dressing",
                    "Top salad with sliced chicken and drizzle with dressing"
                ]
            }
        };

        // Simple demo implementation
        function handleHashChange() {
            const hash = window.location.hash;
            
            if (hash.startsWith('#recipe/')) {
                const recipeId = hash.substring(8);
                const recipe = demoRecipes[recipeId];
                
                if (recipe) {
                    showRecipeDetail(recipe);
                } else {
                    // Recipe not found, go back to main
                    window.location.hash = '';
                }
            } else {
                showMainPage();
            }
        }

        function showRecipeDetail(recipe) {
            const mainPage = document.getElementById('mainPage');
            const detailPage = document.getElementById('recipeDetailPage');
            const title = document.getElementById('detailTitle');
            const content = document.getElementById('recipeDetailContent');
            
            // Hide main page and show detail page
            mainPage.style.display = 'none';
            detailPage.style.display = 'block';
            
            title.textContent = recipe.title;
            content.innerHTML = renderRecipeDetail(recipe);
            
            // Scroll to top
            window.scrollTo(0, 0);
            
            // Update page title
            document.title = `${recipe.title} - Recipe Management`;
        }

        function showMainPage() {
            const mainPage = document.getElementById('mainPage');
            const detailPage = document.getElementById('recipeDetailPage');
            
            // Hide detail page and show main page
            detailPage.style.display = 'none';
            mainPage.style.display = 'block';
            
            // Restore page title
            document.title = 'Recipe Management - Demo';
        }

        function renderRecipeDetail(recipe) {
            const totalTime = (recipe.prep_time || 0) + (recipe.cook_time || 0);
            
            return `
                ${recipe.description ? `<p style="margin-bottom: 2rem; font-size: 1.1rem; color: #666;">${recipe.description}</p>` : ''}
                
                <div class="detail-meta">
                    ${recipe.prep_time ? `
                        <div class="detail-meta-item">
                            <span class="detail-meta-value">${recipe.prep_time}</span>
                            <span class="detail-meta-label">Prep (min)</span>
                        </div>
                    ` : ''}
                    ${recipe.cook_time ? `
                        <div class="detail-meta-item">
                            <span class="detail-meta-value">${recipe.cook_time}</span>
                            <span class="detail-meta-label">Cook (min)</span>
                        </div>
                    ` : ''}
                    ${recipe.servings ? `
                        <div class="detail-meta-item">
                            <span class="detail-meta-value">${recipe.servings}</span>
                            <span class="detail-meta-label">Servings</span>
                        </div>
                    ` : ''}
                    ${recipe.difficulty ? `
                        <div class="detail-meta-item">
                            <span class="detail-meta-value">${recipe.difficulty.charAt(0).toUpperCase() + recipe.difficulty.slice(1)}</span>
                            <span class="detail-meta-label">Difficulty</span>
                        </div>
                    ` : ''}
                </div>

                ${recipe.ingredients && recipe.ingredients.length > 0 ? `
                    <div class="detail-section">
                        <h3><i class="fas fa-list"></i> Ingredients</h3>
                        <ul class="ingredients-list">
                            ${recipe.ingredients.map(ing => `
                                <li>
                                    <span class="ingredient-name">${ing.name}</span>
                                    <span class="ingredient-amount">${ing.amount}${ing.unit ? ` ${ing.unit}` : ''}</span>
                                </li>
                            `).join('')}
                        </ul>
                    </div>
                ` : ''}

                ${recipe.instructions && recipe.instructions.length > 0 ? `
                    <div class="detail-section">
                        <h3><i class="fas fa-tasks"></i> Instructions</h3>
                        <ol class="instructions-list">
                            ${recipe.instructions.map(inst => `<li>${inst}</li>`).join('')}
                        </ol>
                    </div>
                ` : ''}

                ${recipe.tags && recipe.tags.length > 0 ? `
                    <div class="detail-section">
                        <h3><i class="fas fa-tags"></i> Tags</h3>
                        <div class="detail-tags">
                            ${recipe.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                        </div>
                    </div>
                ` : ''}

                ${recipe.meal_times && recipe.meal_times.length > 0 ? `
                    <div class="detail-section">
                        <h3><i class="fas fa-clock"></i> Meal Times</h3>
                        <div class="detail-tags">
                            ${recipe.meal_times.map(mealTime => `<span class="tag meal-time-tag">${mealTime.charAt(0).toUpperCase() + mealTime.slice(1)}</span>`).join('')}
                        </div>
                    </div>
                ` : ''}
            `;
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Handle hash changes
            window.addEventListener('hashchange', handleHashChange);
            
            // Handle back button click
            document.getElementById('backToListBtn').addEventListener('click', function() {
                window.location.hash = '';
            });
            
            // Initial load
            handleHashChange();
        });
    </script>
</body>
</html>